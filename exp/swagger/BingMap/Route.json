{
    "swagger": "2.0",
    "schemes": [
        "http"
    ],
    "host": "dev.virtualearth.net",
    "basePath": "/REST/v1",
    "paths": {
        "/Routes/DistanceMatrix": {
            "post": {
                "description": "Synchronous Distance Matrix Request URL (POST)",
                "parameters": [
                    {
                        "name": "key",
                        "required": true,
                        "in": "query",
                        "type": "string",
                        "description": "BingMapsAPIKey",
                        "enum": [
                            "AtI47DZkFsqZK_2Ks7A_68EwjlpTLNI2imXFZey-6jt_YnFE1n3SXVZ6umljRFch"
                        ]
                    },
                    {
                        "name": "body",
                        "required": true,
                        "in": "body",
                        "description": "Specifies the final location for all the routes.",
                        "schema": {
                            "$ref": "#/definitions/DistanceMatrix"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "One or more Location resources are returned in the response when you make a request by using these URL templates"
                    }
                }
            }
        },
        "/Routes/DistanceMatrixAsync": {
            "post": {
                "description": "ASynchronous Distance Matrix Request URL (POST)",
                "parameters": [
                    {
                        "name": "key",
                        "required": true,
                        "in": "query",
                        "type": "string",
                        "description": "BingMapsAPIKey",
                        "enum": [
                            "AtI47DZkFsqZK_2Ks7A_68EwjlpTLNI2imXFZey-6jt_YnFE1n3SXVZ6umljRFch"
                        ]
                    },
                    {
                        "name": "body",
                        "required": true,
                        "in": "body",
                        "description": "Specifies the final location for all the routes.",
                        "schema": {
                            "$ref": "#/definitions/DistanceMatrix"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "One or more Location resources are returned in the response when you make a request by using these URL templates"
                    }
                }
            }
        }
    },
    "definitions": {
        "SnapToRoad": {
            "type": "object",
            "required": [
                "points"
            ],
            "properties": {
                "points": {
                    "$ref": "#/definitions/Location"
                },
                "interpolate": {
                    "type": "boolean"
                },
                "includeSpeedLimit": {
                    "type": "boolean"
                },
                "includeTruckSpeedLimit": {
                    "type": "boolean"
                },
                "speedUnit": {
                    "type": "string",
                    "enum": [
                        "MPH",
                        "KPH"
                    ]
                },
                "travelMode": {
                    "type": "string",
                    "enum": [
                        "driving",
                        "walking"
                    ]
                },
                "vehicleSpec": {
                    "$ref": "#/definitions/VehicleSpec"
                }
            }
        },
        "VehicleSpec": {
            "type": "object",
            "properties": {
                "dimensionUnit": {
                    "type": "string",
                    "enum": [
                        "meter",
                        "m",
                        "foot",
                        "ft"
                    ]
                },
                "weightUnit": {
                    "type": "string",
                    "enum": [
                        "kilogram ",
                        "kg",
                        "pound ",
                        "lb"
                    ]
                },
                "vehicleHeight": {
                    "type": "double",
                    "example": 5
                },
                "vehicleWidth": {
                    "type": "double",
                    "example": 3.5
                },
                "vehicleLength": {
                    "type": "double",
                    "example": 30
                },
                "vehicleWeight": {
                    "type": "double",
                    "example": 30000
                },
                "vehicleAxles": {
                    "type": "integer",
                    "example": 3
                },
                "vehicleTrailers": {
                    "type": "integer",
                    "example": 2
                },
                "vehicleSemi": {
                    "type": "boolean"
                },
                "vehicleMaxGradient": {
                    "type": "double",
                    "example": 10
                },
                "vehicleMinTurnRadius": {
                    "type": "double",
                    "example": 15
                },
                "vehicleAvoidCrossWind": {
                    "type": "boolean"
                },
                "vehicleAvoidGroundingRisk": {
                    "type": "boolean"
                },
                "vehicleHazardousMaterials": {
                    "type": "string",
                    "enum": [
                        "Combustable",
                        "C",
                        "Corrosive",
                        "Cr",
                        "Explosive",
                        "E",
                        "Flammable",
                        "F",
                        "FlammableSolid",
                        "FS",
                        "Gas",
                        "G",
                        "GoodsHarmfulToWater",
                        "WH",
                        "Organic",
                        "O",
                        "Other",
                        "Poison",
                        "P",
                        "PoisonousInhalation",
                        "PI",
                        "Radioactive",
                        "R",
                        "None"
                    ]
                },
                "vehicleHazardousPermits": {
                    "type": "string",
                    "enum": [
                        "AllAppropriateForLoad",
                        "Combustable",
                        "C",
                        "Corrosive",
                        "Cr",
                        "Explosive",
                        "E",
                        "Flammable",
                        "F",
                        "FlammableSolid",
                        "FS",
                        "Gas",
                        "G",
                        "Organic",
                        "O",
                        "Poison",
                        "P",
                        "PoisonousInhalation",
                        "PI",
                        "Radioactive",
                        "R",
                        "None"
                    ]
                }
            }
        },
        "DistanceMatrix": {
            "type": "object", 
            "required": [
                "origins",
                "travelMode"
            ],
            "properties": {
                "origins": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Location"
                    }
                },
                "destinations": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Location"
                    }
                },
                "travelMode": {
                    "type": "string",
                    "enum": [
                        "driving",
                        "walking",
                        "transit"
                    ]
                },
                "startTime": {
                    "type": "string",
                    "description":"if travelMode is driving, startTime is required",
                    "format": "datetime"
                },
                "endTime": {
                    "type": "string",
                    "description":"if travelMode is driving, endTime is required",
                    "format": "datetime"
                },
                "resolution": {
                    "type": "integer",
                    "description":"if travelMode is driving, resolution is required",
                    "enum": [1, 2, 3, 4]
                },
                "distanceUnit": {
                    "type": "string",
                    "enum": [
                        "mile",
                        "mi",
                        "kilometer",
                        "km"
                    ]
                },
                "timeUnit": {
                    "type": "string",
                    "enum": [
                        "minute",
                        "second"
                    ]
                }
            }
        },
        "OptimizeItinerary": {
            "type": "object",
            "required": [
                "agents",
                "itineraryItems"
            ],
            "properties": {
                "agents": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Agent"
                    }
                },
                "itineraryItems": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/ItineraryItem"
                    }
                },
                "type": {
                    "type": "string",
                    "enum": [
                        "SimpleRequest",
                        "TrafficRequest"
                    ]
                },
                "roadnetwork": {
                    "type": "boolean"
                },
                "costvalue": {
                    "type": "string",
                    "enum": [
                        "TravelTime",
                        "Distance",
                        "Price"
                    ]
                }
            }
        },
        "ItineraryItem": {
            "type": "object",
            "required": [
                "name",
                "openingTime",
                "closingTime",
                "dwellTime",
                "priority",
                "location"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "openingTime": {
                    "type": "string",
                    "format": "datetime"
                },
                "closingTime": {
                    "type": "string",
                    "format": "datetime"
                },
                "dwellTime": {
                    "type": "string"
                },
                "priority": {
                    "type": "integer",
                    "maximum": 100,
                    "minimum": 1
                },
                "quantity": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "depot": {
                    "type": "boolean"
                },
                "location": {
                    "$ref": "#/definitions/Location"
                },
                "dropOffFrom": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "Agent": {
            "type": "object",
            "required": [
                "name", 
                "shifts"    
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "shifts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Shift"
                    }
                },
                "price": {
                    "$ref": "#/definitions/Price"
                },
                "capacity": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                }
            }
        },
        "Price": {
            "type": "object",
            "required": [
                "fixedPrice",
                "pricePerKM",
                "pricePerHour"
            ],
            "properties": {
                "fixedPrice": {
                    "type": "double"
                },
                "pricePerKM": {
                    "type": "double"
                },
                "pricePerHour": {
                    "type": "double"
                }
            }
        },
        "Shift": {
            "type": "object",
            "required": [
                "startTime",
                "startLocation",
                "endTime",
                "endLocation"
            ],
            "properties": {
                "startTime": {
                    "type": "string",
                    "format": "datetime"
                },
                "startLocation": {
                    "$ref": "#/definitions/Location"
                },
                "endTime": {
                    "type": "string",
                    "format": "datetime"
                },
                "endLocation":{
                    "$ref": "#/definitions/Location"
                },
                "breaks": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Break"
                    }
                }
            }
        },
        "Break": {
            "type": "object",
            "required": [
                "startTime",
                "endTime"
            ],
            "properties": {
                "startTime": {
                    "type": "string",
                    "format": "datetime"
                },
                "endTime": {
                    "type": "string",
                    "format": "datetime"
                },
                "duration": {
                    "type": "string"
                }
            }
        },
        "Location": {
            "type": "object", 
            "required": [
                "latitude",
                "longitude"
            ],
            "properties": {
                "latitude": {
                    "type": "double",
                    "maximum": 90,
                    "minimum": -90
                },
                "longitude": {
                    "type": "double",
                    "maximum": 180,
                    "minimum": -180
                }
            }
        }
    }
}